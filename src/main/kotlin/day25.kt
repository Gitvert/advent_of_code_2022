val DECIMAL_TO_SNAFU = mapOf(
    -35 to "-=0",
    -34 to "-=1",
    -33 to "-=2",
    -32 to "--=",
    -31 to "---",
    -30 to "--0",
    -29 to "--1",
    -28 to "--2",
    -27 to "-0=",
    -26 to "-0-",
    -25 to "-00",
    -24 to "-01",
    -23 to "-02",
    -22 to "-1=",
    -21 to "-1-",
    -20 to "-10",
    -19 to "-11",
    -18 to "-12",
    -17 to "-2=",
    -16 to "-2-",
    -15 to "-20",
    -14 to "-21",
    -13 to "-22",
    -12 to  "=-",
    -11 to  "=-",
    -10 to  "=0",
    -9 to  "=1",
    -8 to  "=2",
    -7 to  "-=",
    -6 to  "--",
    -5 to  "-0",
    -4 to  "-1",
    -3 to  "-2",
    -2 to  "=",
    -1 to  "-",
    0 to "0",
    1 to "1",
    2 to "2",
    3 to "1=",
    4 to "1-",
    5 to "10",
    6 to "11",
    7 to "12",
    8 to "2=",
    9 to "2-",
    10 to "20",
    11 to "21",
    12 to "22",
    13 to "1==",
    14 to "1=-",
    15 to "1=0",
    16 to "1=1",
    17 to "1=2",
    18 to "1-=",
    19 to "1--",
    20 to "1-0",
    21 to "1-1",
    22 to "1-2",
    23 to "10=",
    24 to "10-",
    25 to "100",
    26 to "101",
    27 to "102",
    28 to "11=",
    29 to "11-",
    30 to "110",
    31 to "111",
    32 to "112",
    33 to "12=",
    34 to "12-",
    35 to "120",
    36 to "121",
    37 to "122",
    38 to "2==",
    39 to "2=-",
    40 to "2=0",
    41 to "2=1",
    42 to "2=2",
    43 to "2-=",
    44 to "2--",
    45 to "2-0",
    46 to "2-1",
    47 to "2-2",
    48 to "20=",
    49 to "20-",
    50 to "200",
    51 to "201",
    52 to "202",
    53 to "21=",
    54 to "21-",
    55 to "210",
    56 to "211",
    57 to "212",
    58 to "22=",
    59 to "22-",
    60 to "220",
    61 to "221",
    62 to "222",
    63 to "1===",
    64 to "1==-",
    65 to "1==0",
    66 to "1==1",
    67 to "1==2",
    68 to "1=-=",
    69 to "1=--",
    70 to "1=-0",
    71 to "1=-1",
    72 to "1=-2",
    73 to "1=0=",
    74 to "1=0-",
    75 to "1=00",
    76 to "1=01",
    77 to "1=02",
    78 to "1=1=",
    79 to "1=1-",
    80 to "1=10",
    81 to "1=11",
    82 to "1=12",
    83 to "1=2=",
    84 to "1=2-",
    85 to "1=20",
    86 to "1=21",
    87 to "1=22",
    88 to "1-==",
    89 to "1-=-",
    90 to "1-=0",
    91 to "1-=1",
    92 to "1-=2",
    93 to "1--=",
    94 to "1---",
    95 to "1--0",
    96 to "1--1",
    97 to "1--2",
    98 to "1-0=",
    99 to "1-0-",
    100 to "1-01"
)

val SNAFU_TO_DECIMAL = mapOf(
    "-=0" to -35,
    "-=1" to -34,
    "-=2" to -33,
    "--=" to -32,
    "---" to -31,
    "--0" to -30,
    "--1" to -29,
    "--2" to -28,
    "-0=" to -27,
    "-0-" to -26,
    "-00" to -25,
    "-01" to -24,
    "-02" to -23,
    "-1=" to -22,
    "-1-" to -21,
    "-10" to -20,
    "-11" to -19,
    "-12" to -18,
    "-2=" to -17,
    "-2-" to -16,
    "-20" to -15,
    "-21" to -14,
    "-22" to -13,
    "=-" to -12,
    "=-" to -11,
    "=0" to -10,
    "=1" to -9,
    "=2" to -8,
    "-=" to -7,
    "--" to -6,
    "-0" to -5,
    "-1" to -4,
    "-2" to -3,
    "=" to -2,
    "-" to -1,
    "0" to 0,
    "1" to 1,
    "2" to 2,
    "1=" to 3,
    "1-" to 4,
    "10" to 5,
    "11" to 6,
    "12" to 7,
    "2=" to 8,
    "2-" to 9,
    "20" to 10,
    "21" to 11,
    "22" to 12,
    "1==" to 13,
    "1=-" to 14,
    "1=0" to 15,
    "1=1" to 16,
    "1=2" to 17,
    "1-=" to 18,
    "1--" to 19,
    "1-0" to 20,
    "1-1" to 21,
    "1-2" to 22,
    "10=" to 23,
    "10-" to 24,
    "100" to 25,
    "101" to 26,
    "102" to 27,
    "11=" to 28,
    "11-" to 29,
    "110" to 30,
    "111" to 31,
    "112" to 32,
    "12=" to 33,
    "12-" to 34,
    "120" to 35,
    "121" to 36,
    "122" to 37,
    "2==" to 38,
    "2=-" to 39,
    "2=0" to 40,
    "2=1" to 41,
    "2=2" to 42,
    "2-=" to 43,
    "2--" to 44,
    "2-0" to 45,
    "2-1" to 46,
    "2-2" to 47,
    "20=" to 48,
    "20-" to 49,
    "200" to 50,
    "201" to 51,
    "202" to 52,
    "21=" to 53,
    "21-" to 54,
    "210" to 55,
    "211" to 56,
    "212" to 57,
    "22=" to 58,
    "22-" to 59,
    "220" to 60,
    "221" to 61,
    "222" to 62,
    "1===" to 63,
    "1==-" to 64,
    "1==0" to 65,
    "1==1" to 66,
    "1==2" to 67,
    "1=-=" to 68,
    "1=--" to 69,
    "1=-0" to 70,
    "1=-1" to 71,
    "1=-2" to 72,
    "1=0=" to 73,
    "1=0-" to 74,
    "1=00" to 75,
    "1=01" to 76,
    "1=02" to 77,
    "1=1=" to 78,
    "1=1-" to 79,
    "1=10" to 80,
    "1=11" to 81,
    "1=12" to 82,
    "1=2=" to 83,
    "1=2-" to 84,
    "1=20" to 85,
    "1=21" to 86,
    "1=22" to 87,
    "1-==" to 88,
    "1-=-" to 89,
    "1-=0" to 90,
    "1-=1" to 91,
    "1-=2" to 92,
    "1--=" to 93,
    "1---" to 94,
    "1--0" to 95,
    "1--1" to 96,
    "1--2" to 97,
    "1-0=" to 98,
    "1-0-" to 99,
    "1-01" to 100
)

fun day25(lines: List<String>) {
    val longestLine = lines.maxOf { it.length }
    
    val numPositions = Array(longestLine + 10) { mutableListOf<Int>() }

    lines.forEach {
        for (i in it.indices) {
            numPositions[i].add(it.reversed()[i].toString().replace("-", "-1").replace("=", "-2").toInt())
        }
    }
    
    val answer = attemptTwo(numPositions)
    
    println("Day 25 part 1: $answer")
}

fun attemptTwo(numPositions: Array<MutableList<Int>>): String {
    var finalNumber = ""

    for (i in numPositions.indices) {
        if (numPositions[i].isEmpty()) {
            continue
        }
        
        val sum = numPositions[i].sum()

        var snafuSum = DECIMAL_TO_SNAFU[sum]!!
        
        finalNumber = snafuSum.last() + finalNumber
        snafuSum = snafuSum.dropLast(1)
        
        if (snafuSum.isNotEmpty()) {
            val carryOver = SNAFU_TO_DECIMAL[snafuSum]!!
            numPositions[i + 1].add(carryOver)
        }
    }
    
    return finalNumber
}